{"ast":null,"code":"var _s = $RefreshSig$();\n// api\nimport api from \"../utils/api\";\nimport { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport useFlashMessage from \"./useFlashMessage\";\nexport default function useAuth() {\n  _s();\n  const [authenticated, setAuthenticated] = useState(false);\n  const {\n    setFlashMessage\n  } = useFlashMessage();\n  const navigate = useNavigate();\n  async function register(user) {\n    let msgText = \"Registration completed successfully!\";\n    let msgType = \"success\";\n    try {\n      const data = await api.post(\"users/register\", user).then(response => {\n        return response.data;\n      });\n      await authUser(data);\n    } catch (error) {\n      msgText = error.response.data.message;\n      msgType = \"error\";\n    }\n    setFlashMessage(msgText, msgType);\n  }\n  async function authUser(data) {\n    setAuthenticated(true);\n    localStorage.setItem(\"token\", JSON.stringify(data.token));\n    navigate(\"/\");\n  }\n  return {\n    register\n  };\n}\n_s(useAuth, \"0ONyxZLtgIKkckNz9QkHnrwmfGw=\", false, function () {\n  return [useFlashMessage, useNavigate];\n});","map":{"version":3,"names":["api","useState","useEffect","useNavigate","useFlashMessage","useAuth","_s","authenticated","setAuthenticated","setFlashMessage","navigate","register","user","msgText","msgType","data","post","then","response","authUser","error","message","localStorage","setItem","JSON","stringify","token"],"sources":["C:/Users/Fabiano/Desktop/to_do_app/frontend/src/hooks/useAuth.js"],"sourcesContent":["// api\r\nimport api from \"../utils/api\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport useFlashMessage from \"./useFlashMessage\";\r\n\r\nexport default function useAuth() {\r\n  const [authenticated, setAuthenticated] = useState(false);\r\n  const { setFlashMessage } = useFlashMessage();\r\n  const navigate = useNavigate();\r\n\r\n  async function register(user) {\r\n    let msgText = \"Registration completed successfully!\";\r\n    let msgType = \"success\";\r\n    try {\r\n      const data = await api.post(\"users/register\", user).then((response) => {\r\n        return response.data;\r\n      });\r\n      await authUser(data);\r\n    } catch (error) {\r\n      msgText = error.response.data.message;\r\n      msgType = \"error\";\r\n    }\r\n\r\n    setFlashMessage(msgText, msgType);\r\n  }\r\n\r\n  async function authUser(data) {\r\n    setAuthenticated(true);\r\n\r\n    localStorage.setItem(\"token\", JSON.stringify(data.token));\r\n    navigate(\"/\");\r\n  }\r\n  return { register };\r\n}\r\n"],"mappings":";AAAA;AACA,OAAOA,GAAG,MAAM,cAAc;AAE9B,SAASC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,eAAe,MAAM,mBAAmB;AAE/C,eAAe,SAASC,OAAOA,CAAA,EAAG;EAAAC,EAAA;EAChC,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAGP,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM;IAAEQ;EAAgB,CAAC,GAAGL,eAAe,CAAC,CAAC;EAC7C,MAAMM,QAAQ,GAAGP,WAAW,CAAC,CAAC;EAE9B,eAAeQ,QAAQA,CAACC,IAAI,EAAE;IAC5B,IAAIC,OAAO,GAAG,sCAAsC;IACpD,IAAIC,OAAO,GAAG,SAAS;IACvB,IAAI;MACF,MAAMC,IAAI,GAAG,MAAMf,GAAG,CAACgB,IAAI,CAAC,gBAAgB,EAAEJ,IAAI,CAAC,CAACK,IAAI,CAAEC,QAAQ,IAAK;QACrE,OAAOA,QAAQ,CAACH,IAAI;MACtB,CAAC,CAAC;MACF,MAAMI,QAAQ,CAACJ,IAAI,CAAC;IACtB,CAAC,CAAC,OAAOK,KAAK,EAAE;MACdP,OAAO,GAAGO,KAAK,CAACF,QAAQ,CAACH,IAAI,CAACM,OAAO;MACrCP,OAAO,GAAG,OAAO;IACnB;IAEAL,eAAe,CAACI,OAAO,EAAEC,OAAO,CAAC;EACnC;EAEA,eAAeK,QAAQA,CAACJ,IAAI,EAAE;IAC5BP,gBAAgB,CAAC,IAAI,CAAC;IAEtBc,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEC,IAAI,CAACC,SAAS,CAACV,IAAI,CAACW,KAAK,CAAC,CAAC;IACzDhB,QAAQ,CAAC,GAAG,CAAC;EACf;EACA,OAAO;IAAEC;EAAS,CAAC;AACrB;AAACL,EAAA,CA5BuBD,OAAO;EAAA,QAEDD,eAAe,EAC1BD,WAAW;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}